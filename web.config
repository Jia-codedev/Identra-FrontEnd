<configuration>
 <appSettings>
  <add key="NEXT_PUBLIC_IDENTRA_BE_URI" value="http://192.168.2.112:8000" />
  <add key="NEXT_PUBLIC_IDENTRA_SOCKET_URL" value="ws://192.168.2.112:8000" />
 </appSettings>
 <system.webServer>
  <iisnode node_env="production" nodeProcessCountPerApplication="1" maxConcurrentRequestsPerProcess="1024" maxNamedPipeConnectionRetry="100" namedPipeConnectionRetryDelay="250" maxNamedPipeConnectionPoolSize="512" maxNamedPipePooledConnectionAge="30000" asyncCompletionThreadCount="0" initialRequestBufferSize="4096" maxRequestBufferSize="65536" uncFileChangesPollingInterval="5000" gracefulShutdownTimeout="60000" loggingEnabled="true" logDirectory="iisnode" debuggingEnabled="true" debugHeaderEnabled="false" debuggerPortRange="5058-6058" debuggerPathSegment="debug" maxLogFileSizeInKB="128" maxTotalLogFileSizeInKB="1024" maxLogFiles="20" devErrorsEnabled="true" flushResponse="false" enableXFF="false" promoteServerVars="" configOverrides="iisnode.yml" watchedFiles="web.config;*.js" nodeProcessCommandLine="&quot;C:\Program Files\nodejs\node.exe&quot;" interceptor="&quot;%programfiles%\iisnode\interceptor.js&quot;" />
  <!-- Add custom headers for cookie handling -->
  <httpProtocol>
    <customHeaders>
      <add name="Access-Control-Allow-Credentials" value="true" />
      <add name="Access-Control-Allow-Headers" value="Content-Type, Authorization, Cookie" />
      <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS" />
    </customHeaders>
  </httpProtocol>
  <handlers>
   <add name="iisnode" path="server.js" verb="*" modules="iisnode" />
  </handlers>
  <rewrite>
   <rules>
    <rule name="myapp">
     <match url="/*" />
     <action type="Rewrite" url="server.js" />
    </rule>
   </rules>
  </rewrite>
  <directoryBrowse enabled="true" />
 </system.webServer>
</configuration>